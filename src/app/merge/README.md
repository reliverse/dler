# @reliverse/remege

[📦 NPM](https://npmjs.com/package/@reliverse/remege) • [🌌 GitHub](https://github.com/reliverse/remege)

> @reliverse/remege is a tool to merge multiple text/code files into a single file or output stream. Skips binaries, adds optional path footers, supports CI & interactive mode. Built with love for developers who like clean structure.

## Features

- 🧠 Smart filtering: skips binary/media files automatically
- 🧩 Flexible output: write to file or stream to `stdout`
- 💬 Optional footer: add a comment with the relative path after each file
- 🛠️ CI-friendly: use `--batch` to disable all prompts
- 📜 Comment-aware: supports language-specific footer prefixes
- 🪄 Interactive prompts if args are missing
- 🔁 Custom separators between sections (e.g. `\n`, `\t`, blank lines, etc.)

## Installation

- You can run it via `bunx`: `bunx @reliverse/remege` (usage: `bunx @reliverse/remege --help`)
- Or by installing globally: `bun i -g @reliverse/remege` (usage: `remege --help`)
- Or install locally: `bun add -D @reliverse/remege` (usage: `bun remege --help`)

## Tip

You can automate the process by adding a script to your `package.json`:

```json
"scripts": {
  // remege | bunx @reliverse/remege
  "merge": "remege --in src/**/*.ts --out dist/combined.ts"
}
```

## Usage

Use it interactively:

```bash
remege
```

Or via command line flags:

```bash
remege \
  --in "src/**/*.ts" \
  --ignore "**/*.test.ts" \
  --out dist/merged.txt \
  --separator "\n\n" \
  --comment "// "
```

## Options

| Flag              | Type      | Description |
|------------------|-----------|-------------|
| `--in`            | `string[]` | Input glob patterns (comma-separated or repeated) |
| `--ignore`        | `string[]` | Extra ignore patterns |
| `--out`           | `string`   | Output file path |
| `--stdout`        | `boolean`  | Print merged result to stdout |
| `--separator`     | `string`   | Custom separator between sections (default: `\n\n`) |
| `--comment`       | `string`   | Custom comment prefix (e.g. `#`, `//`) |
| `--forceComment`  | `boolean`  | Use your custom comment for **all** file types |
| `--noPath`        | `boolean`  | Skip path footer (don't show file path after each section) |
| `--format`        | `string`   | Fallback extension for autogenerated file (default: `txt`) |
| `--batch`         | `boolean`  | Disable prompts (non-interactive mode) |

## How It Works

- You provide `--in` globs like `src/**/*.ts`
- Optionally ignore files via `--ignore`
- All matching files are collected (except binaries)
- Each section is appended into the final output, optionally with a path footer like:

```ts
// relative/path/to/file.ts
```

## Example

```bash
bunx @reliverse/remege --in "src/**/*.js" --stdout --noPath
```

Will print all JS files in `src` to the terminal, separated by blank lines, without paths.

## Custom Separator Examples

```bash
--separator "\n\n"    # double newline
--separator "\n---\n" # markdown-style break
--separator "\n// -----\n" # JS-style
```

> Use escaped characters like `\n`, `\t`. These will be converted to newlines, tabs, etc.

## Binary Files That Are Skipped

File types like images, videos, fonts, compressed archives, and executables are skipped by default:

- `.png`, `.jpg`, `.gif`, `.mp4`, `.mp3`, `.pdf`, `.zip`, `.exe`, `.woff`, `.jar`, etc.

## Language-Specific Comment Prefixes

These are automatically selected based on file extensions:

| Ext   | Comment |
|-------|---------|
| `ts`  | `//`   |
| `py`  | `#`    |
| `html`| `<!--` |
| `sql` | `--`   |
| `css` | `/*`   |

You can override using `--comment`.

## Use Cases Examples

- You want to send the contents of several files to AI
- Collecting code snippets into a teaching demo
- Merging many markdown files into a single file

## License

💖 2025 MIT [blefnk Nazar Kornienko](https://github.com/blefnk)
